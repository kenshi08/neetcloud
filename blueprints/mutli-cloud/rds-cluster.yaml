formatVersion: 1
inputs: {}
resources:
  RDS_Cluster_1:
    type: Cloud.Service.AWS.RDS.Cluster
    dependsOn:
      - Cloud_Network_1
    properties:
      region: ap-southeast-2
      account: SDDC APJ AWS
      master_password: foobarbaz
      master_username: foo
      availability_zones:
        - ap-southeast-2a
        - ap-southeast-2c
  Cloud_Network_1:
    type: Cloud.Network
    properties:
      name: rds network
      networkType: existing
  RDS_DB_3:
    type: Cloud.Service.AWS.RDS.Cluster.Instance
    dependsOn:
      - Cloud_Network_1
    properties:
      count: 2
      identifier_prefix: multi-az-
      region: ap-southeast-2
      account: SDDC APJ AWS
      allocated_storage: 20
      instance_class: db.t2.small
      name: mydb
      cluster_identifier: '${resource.RDS_Cluster_1.id}'
      multi_az: true
